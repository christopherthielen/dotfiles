#!/bin/bash
# One-time setup tasks (runs once per machine)

set -e

{{- if eq .chezmoi.os "darwin" }}
# asimov excludes node_modules, etc from Time Machine
if command -v brew &>/dev/null && brew services list | grep -q "^asimov *stopped"; then
    echo "Starting asimov service..."
    sudo brew services start asimov
fi
{{- end }}

# Configure git-lfs
if command -v git-lfs &>/dev/null; then
    echo "Configuring git-lfs..."
    git lfs install 2>/dev/null || true
fi

# Initialize neovim plugins
if command -v nvim &>/dev/null; then
    echo "Initializing neovim plugins..."
    nvim --headless "+Lazy! sync" +qa 2>/dev/null || true
fi

echo "One-time setup complete!"

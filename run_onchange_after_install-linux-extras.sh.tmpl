{{- if eq .chezmoi.os "linux" -}}
#!/bin/bash
# Install Linux tools not available via apt or Linuxbrew
# Most tools now come from Linuxbrew (with bottles) - see packages.toml
# hash:v2 - added go to linux brew packages for tag install

set -e

echo "Installing Linux extras..."

# tag (requires go)
if command -v go &>/dev/null && ! command -v tag &>/dev/null; then
    echo "Installing tag via go install..."
    go install github.com/christopherthielen/tag@latest
fi

# Add yubikey repo if not present (for ykman via apt)
if ! grep -q "yubico" /etc/apt/sources.list.d/* 2>/dev/null; then
    echo "Adding Yubico apt repository..."
    sudo apt-add-repository -y ppa:yubico/stable 2>/dev/null || true
    sudo apt-get update -qq
    sudo apt-get install -y yubikey-manager 2>/dev/null || true
fi

echo "Linux extras complete!"
{{- end }}
